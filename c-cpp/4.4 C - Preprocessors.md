Preprocessors were mentioned before with the build system, but they are basically logic for what code it should parse.
They basically cut and paste code based on parameters that the compiler can provide, allows to make decisions for compatiblity or filtering features in the same codebase to be ignored in the machine code.

We will go through the most common ones.
### Include

```c
#include "path/to/file.h"
#include <path/to/file.h>
```

### Defines

Defines are like your preprocessor variables, they will act as an identifier that you can paste code with.

```c
#define MY_DEF 10.0
```

```c
// Will paste all symbols after.
#define MY_DEF2 1000, 2000
// Always use \ before a new line character to make the define multiline.
print (MY_DEF2);
```

```c
// If a space is after \, it will not "escape" the new line and will think its the end of the define expression.
#define MY_MULTI_LINE_DEF \
	while(true) {} 

// Infinite loop, oh no!
MY_MULTI_LINE_DEF;
```

You can also remove defines anywhere in your code.
```cpp
#undef MY_DEFINE
```
Making them not apply or paste code anymore, useful for scoping defines you only want in a local part.

#### Macros
Macros is basically just defines with parameters, but they make it very powerful for making repetitive code easier.

```c
#define MY_ADD_MACRO(A, B) A + B
MY_ADD_MACRO(A, B);

// Undef like any other define.
#undef MY_ADD_MACRO
```

Macros do have some special features, it can make inputted symbols into strings.
```c
#define MY_STRINGIFY_MACRO(X) #X

printf(MY_STRINGIFY_MACRO(Why)); // These are constant, so it works with printf.
```

It can merge symbols together to sort of make two indentifiers into one.
```c
// T is the type, N is the count.
#define ARRAY_OF(T, N) struct T ## _array_of_ ## N { T a[N]; }

// Will create a struct called
ARRAY_OF(int, 5);
// will paste in:
struct int_array_of_5 { int a[5]; };
```

Macros can also call other macros.
```c
#define MACRO1(a, b) a + b
#define MACRO2(b) MACRO1(b, b)
```

# If-else

You can do conditional statements with preprocessors, the most common ones usually is just checking if a define exists.

```c
#ifdef MY_DEFINE
 ... code here
#else
 ... other code here.
#endif
```

Or when something is not defined.
```c
#ifndef MY_DEFINE
 ... code here
#else
 ... other code here
#endif
```

There is also regular if cases that can handle expressions.
```c
#if defined(CREDIT)
    credit();
#elif defined(DEBIT)
    debit();
#else
    printerror();
#endif

// Taken from a web sample.
#if DLEVEL > 5
    #define SIGNAL  1
    #if STACKUSE == 1 || SIGNAL == 1
        #define STACK   200
    #else
        #define STACK   100
    #endif
#else
    #define SIGNAL  0
    #if STACKUSE == 1 && SIGNAL == 0
        #define STACK   100
    #else
        #define STACK   50
    #endif
#endif
#if DLEVEL == 0
    #define STACK 0
#elif DLEVEL == 1
    #define STACK 100
#elif DLEVEL > 5
    display( debugptr );
#else
    #define STACK 200
#endif
```

```
```